from django.shortcuts import render

# Question class
class Questions:
    def __init__(self, que, a, b, c, d, correct, explanation):
        self.que = que
        self.a = a
        self.b = b
        self.c = c
        self.d = d
        self.correct = correct  # answer: 'a', 'b', 'c', 'd'
        self.explanation = explanation


def testpaper(request):
    questions = [
         Questions(
            "निम्न में से किस कोशिका में कोशिका भित्ति नहीं पाई जाती है?",
            "(a) पादप कोशिका",
            "(b) कवक कोशिका",
            "(c) जंतु कोशिका",
            "(d) जीवाणु कोशिका",
            "c",
            "जंतु कोशिका में कोशिका भित्ति नहीं होती।"
        ),

        Questions(
            "पादप कोशिका भित्ति का मुख्य रासायनिक घटक क्या है?",
            "(a) काइटिन",
            "(b) सेल्यूलोज",
            "(c) पेप्टिडोग्लाइकेन",
            "(d) प्रोटीन",
            "b",
            "पादप कोशिका भित्ति का मुख्य घटक सेल्यूलोज होता है।"
        ),

        Questions(
            "मध्य पर्त (Middle lamella) मुख्य रूप से किससे बनी होती है?",
            "(a) कैल्शियम कार्बोनेट",
            "(b) कैल्शियम पेक्टेट",
            "(c) सेल्यूलोज",
            "(d) लिग्निन",
            "b",
            "मध्य पर्त मुख्य रूप से कैल्शियम पेक्टेट से बनी होती है।"
        ),

        Questions(
            "कवक (Fungi) की कोशिका भित्ति किससे बनी होती है?",
            "(a) सेल्यूलोज",
            "(b) पेक्टिन",
            "(c) काइटिन",
            "(d) लिग्निन",
            "c",
            "कवक की कोशिका भित्ति काइटिन से बनी होती है।"
        ),

        Questions(
            "दो सन्निकट कोशिकाओं के बीच कोशिका भित्ति की कौन-सी परत पाई जाती है?",
            "(a) प्राथमिक भित्ति",
            "(b) द्वितीयक भित्ति",
            "(c) प्लाज्मा झिल्ली",
            "(d) मध्य पर्त",
            "d",
            "दो सन्निकट कोशिकाओं के बीच मध्य पर्त पाई जाती है।"
        ),

        Questions(
            "प्लास्मोडेस्माटा क्या होते हैं?",
            "(a) नाभिक में प्रोटीन चैनल",
            "(b) सन्निकट कोशिकाओं के बीच साइटोप्लाज्मिक संपर्क",
            "(c) श्वसन संरचनाएँ",
            "(d) कोशिका भित्ति की मोटाई",
            "b",
            "प्लास्मोडेस्माटा सन्निकट कोशिकाओं के बीच साइटोप्लाज्मिक संपर्क होते हैं।"
        ),

        Questions(
            "द्वितीयक कोशिका भित्ति सामान्यतः कैसी होती है?",
            "(a) पतली और लचीली",
            "(b) बढ़ती हुई कोशिकाओं में पाई जाती है",
            "(c) मोटी और कठोर",
            "(d) सजीव होती है",
            "c",
            "द्वितीयक कोशिका भित्ति मोटी और कठोर होती है।"
        ),


        Questions(
            "कोशिका भित्ति मुख्य रूप से क्या प्रदान करती है?",
            "(a) आनुवंशिक नियंत्रण",
            "(b) प्रोटीन संश्लेषण",
            "(c) यांत्रिक सहारा",
            "(d) ऊर्जा उत्पादन",
            "c",
            "कोशिका भित्ति कोशिका को यांत्रिक सहारा प्रदान करती है।"
        ),

        Questions(
            "कोशिका भित्ति एक ____ होती है।",
            "(a) सजीव संरचना",
            "(b) निर्जीव संरचना",
            "(c) अर्ध-सजीव संरचना",
            "(d) उपापचयी संरचना",
            "b",
            "कोशिका भित्ति एक निर्जीव संरचना होती है।"
        ),

        Questions(
            "निम्न में से किस जीव में कोशिका भित्ति नहीं होती है?",
            "(a) शैवाल",
            "(b) कवक",
            "(c) जीवाणु",
            "(d) अमीबा",
            "d",
            "अमीबा में कोशिका भित्ति नहीं होती।"
        ),

        Questions(
            "प्राथमिक कोशिका भित्ति सामान्यतः कहाँ पाई जाती है?",
            "(a) मृत कोशिकाओं में",
            "(b) बढ़ती हुई कोशिकाओं में",
            "(c) पुरानी कोशिकाओं में",
            "(d) जंतु कोशिकाओं में",
            "b",
            "प्राथमिक कोशिका भित्ति बढ़ती हुई कोशिकाओं में पाई जाती है।"
        ),

        Questions(
            "द्वितीयक कोशिका भित्ति को कठोरता कौन देता है?",
            "(a) पेक्टिन",
            "(b) सेल्यूलोज",
            "(c) लिग्निन",
            "(d) प्रोटीन",
            "c",
            "लिग्निन द्वितीयक कोशिका भित्ति को कठोरता प्रदान करता है।"
        ),

        Questions(
            "प्लास्मोडेस्माटा किसमें सहायक होते हैं?",
            "(a) प्रोटीन संश्लेषण",
            "(b) कोशिका विभाजन",
            "(c) कोशिका-से-कोशिका संपर्क",
            "(d) श्वसन",
            "c",
            "प्लास्मोडेस्माटा कोशिका-से-कोशिका संपर्क में सहायक होते हैं।"
        ),

        Questions(
            "जीवाणु कोशिका भित्ति किससे बनी होती है?",
            "(a) सेल्यूलोज",
            "(b) काइटिन",
            "(c) पेप्टिडोग्लाइकेन",
            "(d) लिग्निन",
            "c",
            "जीवाणु कोशिका भित्ति पेप्टिडोग्लाइकेन से बनी होती है।"
        ),

        Questions(
            "मध्य पर्त मुख्य रूप से किसमें सहायक होती है?",
            "(a) सुरक्षा",
            "(b) परिवहन",
            "(c) कोशिकाओं को जोड़ने में",
            "(d) प्रकाश संश्लेषण",
            "c",
            "मध्य पर्त कोशिकाओं को आपस में जोड़ने में सहायक होती है।"
        ),

        Questions(
            "निम्न में से कौन-सा कथन सही है?",
            "(a) जंतु कोशिकाओं में कोशिका भित्ति होती है",
            "(b) परिपक्व कोशिकाओं में कोशिका भित्ति लचीली होती है",
            "(c) आयु के साथ प्राथमिक भित्ति की विस्तार क्षमता कम हो जाती है",
            "(d) कोशिका भित्ति उपापचयी रूप से सक्रिय होती है",
            "c",
            "आयु के साथ प्राथमिक कोशिका भित्ति की विस्तार क्षमता कम हो जाती है।"
        ),
    ]

    from django.shortcuts import render

# Question class
class Questions:
    def __init__(self, que, a, b, c, d, correct, explanation):
        self.que = que
        self.a = a
        self.b = b
        self.c = c
        self.d = d
        self.correct = correct
        self.explanation = explanation


def testpaper(request):

    questions = [
        Questions(
            "निम्न में से किस कोशिका में कोशिका भित्ति नहीं पाई जाती है?",
            "(a) पादप कोशिका",
            "(b) कवक कोशिका",
            "(c) जंतु कोशिका",
            "(d) जीवाणु कोशिका",
            "c",
            "जंतु कोशिका में कोशिका भित्ति नहीं होती।"
        ),

        Questions(
            "पादप कोशिका भित्ति का मुख्य रासायनिक घटक क्या है?",
            "(a) काइटिन",
            "(b) सेल्यूलोज",
            "(c) पेप्टिडोग्लाइकेन",
            "(d) प्रोटीन",
            "b",
            "पादप कोशिका भित्ति का मुख्य घटक सेल्यूलोज होता है।"
        ),

        Questions(
            "मध्य पर्त (Middle lamella) मुख्य रूप से किससे बनी होती है?",
            "(a) कैल्शियम कार्बोनेट",
            "(b) कैल्शियम पेक्टेट",
            "(c) सेल्यूलोज",
            "(d) लिग्निन",
            "b",
            "मध्य पर्त मुख्य रूप से कैल्शियम पेक्टेट से बनी होती है।"
        ),

        Questions(
            "कवक (Fungi) की कोशिका भित्ति किससे बनी होती है?",
            "(a) सेल्यूलोज",
            "(b) पेक्टिन",
            "(c) काइटिन",
            "(d) लिग्निन",
            "c",
            "कवक की कोशिका भित्ति काइटिन से बनी होती है।"
        ),

        Questions(
            "दो सन्निकट कोशिकाओं के बीच कोशिका भित्ति की कौन-सी परत पाई जाती है?",
            "(a) प्राथमिक भित्ति",
            "(b) द्वितीयक भित्ति",
            "(c) प्लाज्मा झिल्ली",
            "(d) मध्य पर्त",
            "d",
            "दो सन्निकट कोशिकाओं के बीच मध्य पर्त पाई जाती है।"
        ),

        Questions(
            "प्लास्मोडेस्माटा क्या होते हैं?",
            "(a) नाभिक में प्रोटीन चैनल",
            "(b) सन्निकट कोशिकाओं के बीच साइटोप्लाज्मिक संपर्क",
            "(c) श्वसन संरचनाएँ",
            "(d) कोशिका भित्ति की मोटाई",
            "b",
            "प्लास्मोडेस्माटा सन्निकट कोशिकाओं के बीच साइटोप्लाज्मिक संपर्क होते हैं।"
        ),

        Questions(
            "द्वितीयक कोशिका भित्ति सामान्यतः कैसी होती है?",
            "(a) पतली और लचीली",
            "(b) बढ़ती हुई कोशिकाओं में पाई जाती है",
            "(c) मोटी और कठोर",
            "(d) सजीव होती है",
            "c",
            "द्वितीयक कोशिका भित्ति मोटी और कठोर होती है।"
        ),


        Questions(
            "कोशिका भित्ति मुख्य रूप से क्या प्रदान करती है?",
            "(a) आनुवंशिक नियंत्रण",
            "(b) प्रोटीन संश्लेषण",
            "(c) यांत्रिक सहारा",
            "(d) ऊर्जा उत्पादन",
            "c",
            "कोशिका भित्ति कोशिका को यांत्रिक सहारा प्रदान करती है।"
        ),

        Questions(
            "कोशिका भित्ति एक ____ होती है।",
            "(a) सजीव संरचना",
            "(b) निर्जीव संरचना",
            "(c) अर्ध-सजीव संरचना",
            "(d) उपापचयी संरचना",
            "b",
            "कोशिका भित्ति एक निर्जीव संरचना होती है।"
        ),

        Questions(
            "निम्न में से किस जीव में कोशिका भित्ति नहीं होती है?",
            "(a) शैवाल",
            "(b) कवक",
            "(c) जीवाणु",
            "(d) अमीबा",
            "d",
            "अमीबा में कोशिका भित्ति नहीं होती।"
        ),

        Questions(
            "प्राथमिक कोशिका भित्ति सामान्यतः कहाँ पाई जाती है?",
            "(a) मृत कोशिकाओं में",
            "(b) बढ़ती हुई कोशिकाओं में",
            "(c) पुरानी कोशिकाओं में",
            "(d) जंतु कोशिकाओं में",
            "b",
            "प्राथमिक कोशिका भित्ति बढ़ती हुई कोशिकाओं में पाई जाती है।"
        ),

        Questions(
            "द्वितीयक कोशिका भित्ति को कठोरता कौन देता है?",
            "(a) पेक्टिन",
            "(b) सेल्यूलोज",
            "(c) लिग्निन",
            "(d) प्रोटीन",
            "c",
            "लिग्निन द्वितीयक कोशिका भित्ति को कठोरता प्रदान करता है।"
        ),

        Questions(
            "प्लास्मोडेस्माटा किसमें सहायक होते हैं?",
            "(a) प्रोटीन संश्लेषण",
            "(b) कोशिका विभाजन",
            "(c) कोशिका-से-कोशिका संपर्क",
            "(d) श्वसन",
            "c",
            "प्लास्मोडेस्माटा कोशिका-से-कोशिका संपर्क में सहायक होते हैं।"
        ),

        Questions(
            "जीवाणु कोशिका भित्ति किससे बनी होती है?",
            "(a) सेल्यूलोज",
            "(b) काइटिन",
            "(c) पेप्टिडोग्लाइकेन",
            "(d) लिग्निन",
            "c",
            "जीवाणु कोशिका भित्ति पेप्टिडोग्लाइकेन से बनी होती है।"
        ),

        Questions(
            "मध्य पर्त मुख्य रूप से किसमें सहायक होती है?",
            "(a) सुरक्षा",
            "(b) परिवहन",
            "(c) कोशिकाओं को जोड़ने में",
            "(d) प्रकाश संश्लेषण",
            "c",
            "मध्य पर्त कोशिकाओं को आपस में जोड़ने में सहायक होती है।"
        ),

        Questions(
            "निम्न में से कौन-सा कथन सही है?",
            "(a) जंतु कोशिकाओं में कोशिका भित्ति होती है",
            "(b) परिपक्व कोशिकाओं में कोशिका भित्ति लचीली होती है",
            "(c) आयु के साथ प्राथमिक भित्ति की विस्तार क्षमता कम हो जाती है",
            "(d) कोशिका भित्ति उपापचयी रूप से सक्रिय होती है",
            "c",
            "आयु के साथ प्राथमिक कोशिका भित्ति की विस्तार क्षमता कम हो जाती है।"
        ),
    ]

    # =============== POST REQUEST (After Submit) ===============
    if request.method == "POST":

        score = 0
        detailed_result = []

        for i, q in enumerate(questions, 1):
            selected_option = request.POST.get(f'option{i}')

            if selected_option == q.correct:
                score += 1

            detailed_result.append({
                'question': q.que,
                'options': [q.a, q.b, q.c, q.d],
                'correct': q.correct,
                'selected': selected_option,
                'explanation': q.explanation
            })

        total = len(questions)
        percentage = round((score / total) * 100, 1)
        wrong_percentage = 100 - percentage

        # Send values to template
        context = {
            'score': score,
            'total': total,
            'percentage': percentage,
            'wrong_percentage': wrong_percentage,
            'result': detailed_result
        }

        return render(request, 'result.html', context)

    # =============== GET REQUEST (Show Questions) ===============
    return render(request, 'question.html', {'questions': questions})